data <- posts$posts$data[i]$comments
}
}
for(i in 1:25){
if(length(posts$posts$data[i])==2){
data <- posts$posts$data[i]$comments
}
}
length(posts$posts$data[[2]])
length(posts$posts$data[[11]])
for(i in 1:25){
if(length(posts$posts$data[i])==2){
print(i)
data <- posts$posts$data[i]$comments
}
}
for(i in 1:25){
if(length(posts$posts$data[i])==2){
print(i)
}
}
for(i in 1:25){
if(length(posts$posts$data[i])>0){
print(i)
}
}
for(i in 1:25){
if(length(posts$posts$data[i])>1){
print(i)
}
}
if(length(posts$posts$data[i])>0){
print(i)
}
for(i in 1:25){
if(length(posts$posts$data[i])>0){
print(i)
}
}
length(posts$posts$data[[11]])
for(i in 1:25){
if(length(posts$posts$data[[i]])>0){
print(i)
}
}
for(i in 1:25){
if(length(posts$posts$data[[i]])==2){
print(i)
}
}
for(i in 1:25){
if(length(posts$posts$data[[i]])==2){
print(i)
data <- posts$posts$data[[i]]$comments$data %>% do.call(rbind,.) %>% data.frame()
}
}
View(data)
for(i in 1:25){
if(length(posts$posts$data[[i]])==2){
print(i)
data <- rbind(data,posts$posts$data[[i]]$comments$data %>% do.call(rbind,.) %>% data.frame())
}
}
View(data)
data <- posts$posts$data[[11]]$comments$data %>% do.call(rbind,.) %>% data.frame()
data2 <- posts$posts$data[[1]]$comments$data %>% do.call(rbind,.) %>% data.frame()
View(rbind(data,data2))
url <- "http://ecshweb.pchome.com.tw/search/v3.3/all/results?q=sony&page=1&sort=rnk/dc"
res = GET(url)
res_json = content(res)
do.call(rbind,res_json$prods)
View(data.frame(do.call(rbind,res_json$prods)))
View(res_json)
library(httr)
url <- "http://ecshweb.pchome.com.tw/search/v3.3/all/results?q=sony&page=1&sort=rnk/dc"
res = GET(url)
res_json = content(res)
do.call(rbind,res_json$prods)
data <- do.call(rbind,res_json$prods)
View(data)
View(res_json)
data <- posts$posts$data%>% do.call(rbind,.) %>% data.frame()
library(jsonlite)
library(httr)
token = "EAACEdEose0cBAKOoSXsg2ltuv5x1sQa0xr52jnmRWNZAb5TGBfise8ncEMdVZCivGvsICtdpwwFG90CZBbnw9eMYHYPdDped4nZA4oRFBu5ClqDNB1pGAmDY7D0l6xx6gmQRyyBrZBGZBgieNHfYL16lUpDlyp9syCDxMbdyKZACqREYCZBtQR0PZAFFhn4je0jRNh8kJbYq6TAZDZD"
FacebookID = "enc.teia"
url_2 = "?fields=posts%7Bcomments.limit(20)%7D&access_token="
url = paste0(url_1,FacebookID,url_2,token)
url_1 = "https://graph.facebook.com/v2.12/"
response = GET(url)
posts  = content(response)
library(jsonlite)
library(httr)
token = "EAACEdEose0cBAKOoSXsg2ltuv5x1sQa0xr52jnmRWNZAb5TGBfise8ncEMdVZCivGvsICtdpwwFG90CZBbnw9eMYHYPdDped4nZA4oRFBu5ClqDNB1pGAmDY7D0l6xx6gmQRyyBrZBGZBgieNHfYL16lUpDlyp9syCDxMbdyKZACqREYCZBtQR0PZAFFhn4je0jRNh8kJbYq6TAZDZD"
FacebookID = "enc.teia"
url_1 = "https://graph.facebook.com/v2.12/"
url_2 = "?fields=posts%7Bcomments.limit(20)%7D&access_token="
url = paste0(url_1,FacebookID,url_2,token)
response = GET(url)
posts  = content(response)
posts$posts$data[[11]]$comments$data[[4]]$message
library(magrittr)
result <- list()
data <- posts$posts$data%>% do.call(rbind,.) %>% data.frame()
posts$posts$data
data <- posts$posts$data
data
library(httr)
token = "EAACEdEose0cBAKOoSXsg2ltuv5x1sQa0xr52jnmRWNZAb5TGBfise8ncEMdVZCivGvsICtdpwwFG90CZBbnw9eMYHYPdDped4nZA4oRFBu5ClqDNB1pGAmDY7D0l6xx6gmQRyyBrZBGZBgieNHfYL16lUpDlyp9syCDxMbdyKZACqREYCZBtQR0PZAFFhn4je0jRNh8kJbYq6TAZDZD"
FacebookID = "enc.teia"
url_1 = "https://graph.facebook.com/v2.12/"
url_2 = "?fields=posts%7Bcomments.limit(20)%7D&access_token="
url = paste0(url_1,FacebookID,url_2,token)
response = GET(url)
posts  = content(response)
View(response)
View(posts)
View(posts)
token = "EAACEdEose0cBAAfsjAkwlCp1gds8Peh5fJJHdsNPjcVPlrfmG65tiADQ3QDZBWUPpdXUFzqczgRzZC8U29tGzcNnye3foNUR94qilgYZBItUYxZCJDiCplqXL9YLEcWbZBEr5qJbErMMd2QxtZB12lgsebOptpoZBxtFMDvEdoahO9dnXwAU9swb8cs3jeysU0ZD"
FacebookID = "enc.teia"
url_1 = "https://graph.facebook.com/v2.12/"
url_2 = "?fields=posts%7Bcomments.limit(20)%7D&access_token="
url = paste0(url_1,FacebookID,url_2,token)
response = GET(url)
posts  = content(response)
library(magrittr)
data <- posts$posts$data
View(data)
data <- posts$posts$data$1
data[[1]]
mode(data)
do.call(rbind,data)
View(data.framde(do.call(rbind,data)))
View(data.frame(do.call(rbind,data)))
View(list(do.call(rbind,data)))
data <- posts$posts$data
View(data)
View(data)
data[[1]]
length(data[[1]])>2
length(data[[1]])==2
data[[length(data[[]])==2]]
data[1:2]
}
for(i in 1:25){
if(length(data[[i]]==2)){
print(i)
}
}
for(i in 1:25){
if(length(data[[i]]==2)){
print(i)
}
}
for(i in 1:25){
print(i)
}
for(i in 1:25){
if(length(data[[i]])==2)
print(i)
}
for(i in 1:25){
if(length(data[[i]])==2)
append(x,i, after=1)
}
for(i in 1:25){
if(length(data[[i]])==2)
append(x,i, after=1)
}
x <- c()
for(i in 1:25){
if(length(data[[i]])==2)
append(x,i, after=1)
}
for(i in 1:25){
if(length(data[[i]])==2)
append(x,i)
}
x <- c(0)
for(i in 1:25){
if(length(data[[i]])==2)
append(x,i)
}
for(i in 1:25){
if(length(data[[i]])==2)
append(x,i)
}
for(i in 1:25){
if(length(data[[i]])==2)
print(i)
append(x,i)
}
x <- c(1,2,3)
append(x,2)
x
for(i in 1:25){
if(length(data[[i]])==2)
print(i)
x <- append(x,i)
}
x <- c(0)
for(i in 1:25){
if(length(data[[i]])==2)
print(i)
x <- append(x,i)
}
x
x <- c()
for(i in 1:25){
if(length(data[[i]])==2)
print(i)
x <- append(x,i)
}
x
data<- data[x]
data<- data[x]
data <- posts$posts$data
data<- data[[x]]
for(i in 1:25){
if(length(data[[i]])==2)
print(i)
x <- append(x,i)
}
x
x <- c()
for(i in 1:25){
if(length(data[[i]])==2)
print(i)
x <- append(x,i)
}
x
data<- data[[x]]
data<- data[[1:2]]
View(posts)
data <- posts$posts$data
data<- data[[1:2]]
View(posts)
data <- posts$posts$data
View(data)
x <- c()
for(i in 1:25){
if(length(data[[i]])==2)
print(i)
x <- append(x,i)
}
x
data[[1:2]]
x
for(i in 1:25){
if(length(data[[i]])==2)
print(i)
x <- append(x,i)
}
x
for(i in 1:25){
if(length(data[[i]])==2){
print(i)
x <- append(x,i)
}
}
x
x <- c()
for(i in 1:25){
if(length(data[[i]])==2){
print(i)
x <- append(x,i)
}
}
x
View(data)
data <- posts$posts$data
data[[x]]
new <- list()
data[[1]]
mode(data[[1]])
for(i in 1:25){
if(length(data[[i]])==2){
print(i)
x <- append(x,i)
new <- append(new,data[[i]])
}
}
View(new)
new <- list()
data <- posts$posts$data
x <- c()
for(i in 1:25){
if(length(data[[i]])==2){
print(i)
x <- append(x,i)
new <- append(new,data[[i]])
}
}
View(new)
for(i in 1:25){
if(length(data[[i]])==2){
print(i)
x <- append(x,i)
new <- append(new,data[[i]]$comments)
}
}
View(new)
new <- list()
data <- posts$posts$data
x <- c()
for(i in 1:25){
if(length(data[[i]])==2){
print(i)
x <- append(x,i)
new <- append(new,data[[i]]$comments)
}
}
View(new)
new <- list()
data <- posts$posts$data
x <- c()
for(i in 1:25){
if(length(data[[i]])==2){
print(i)
x <- append(x,i)
new <- append(new,data[[i]])
}
}
View(new)
data <- posts$posts$data
x <- c()
for(i in 1:25){
if(length(data[[i]])==2){
x <- append(x,i)
new <- append(new,data[[i]])
}
}
View(new)
data <- posts$posts$data
x
for(i in x){
data <- data[[-x]]
}
library(e1071)
library(magrittr)
install.packages("e1071")
install.packages("e1071")
library(e1071)
library(magrittr)
install.packages("magrittr")
install.packages("magrittr")
train <- read.csv("titanicTrain2.csv", stringsAsFactors = F, na.strings = c("NA", ""))
test <- read.csv("titanicQuestion.csv", stringsAsFactors = F, na.strings = c("NA", ""))
all <- rbind(train, test)
#survived
all$survived <- all$survived %>% as.factor
all$sex <- all$sex %>% as.factor
all$pclass <- all$pclass %>% as.ordered
all$pclassSex[all$pclass=='2' & all$sex=='male'] <- 'P2Male'
#PclassSex
all$pclassSex[all$pclass=='1' & all$sex=='male'] <- 'P1Male'
all$pclassSex[all$pclass=='1' & all$sex=='female'] <- 'P1Female'
all$pclassSex[all$pclass=='2' & all$sex=='female'] <- 'P2Female'
all$pclassSex[all$pclass=='3' & all$sex=='female'] <- 'P3Female'
all$pclassSex[all$pclass=='3' & all$sex=='male'] <- 'P3Male'
all$pclassSex <- as.factor(all$pclassSex)
#family
all$family <- all$parch + all$sibsp + 1
#boat
all$boat[is.na(all$boat)] <- "0"
all$boat[all$boat != "0"] <- "1"
all$boat <- all$boat %>% as.factor()
#body
all$body[is.na(all$body)] <- "0"
all$body[all$body != "0"] <- "1"
all$body <- all$body %>% as.factor()
#embark
all$embarked[is.na(all$embarked)] <- "X"
all$embarked <- all$embarked %>% as.factor()
#children
all$age[all$age <= 14] <- 1
all$age[all$age != 1] <- 0
library(e1071)
library(magrittr)
train <- read.csv("titanicTrain2.csv", stringsAsFactors = F, na.strings = c("NA", ""))
setwd("E:/GitHub/NTU-CSX-DataScience--Group5/Project3")
train <- read.csv("titanicTrain2.csv", stringsAsFactors = F, na.strings = c("NA", ""))
library(e1071)
library(magrittr)
train <- read.csv("titanicTrain2.csv", stringsAsFactors = F, na.strings = c("NA", ""))
train <- read.csv("titanicTrain.csv", stringsAsFactors = F, na.strings = c("NA", ""))
test <- read.csv("titanicQuestion.csv", stringsAsFactors = F, na.strings = c("NA", ""))
train <- train[c(1:1000),]
all <- rbind(train, test)
all$survived <- all$survived %>% as.factor
all$sex <- all$sex %>% as.factor
all$pclass <- all$pclass %>% as.ordered
#PclassSex
all$pclassSex[all$pclass=='1' & all$sex=='male'] <- 'P1Male'
all$pclassSex[all$pclass=='2' & all$sex=='male'] <- 'P2Male'
all$pclassSex[all$pclass=='3' & all$sex=='male'] <- 'P3Male'
all$pclassSex[all$pclass=='1' & all$sex=='female'] <- 'P1Female'
all$pclassSex[all$pclass=='2' & all$sex=='female'] <- 'P2Female'
all$pclassSex[all$pclass=='3' & all$sex=='female'] <- 'P3Female'
all$pclassSex <- as.factor(all$pclassSex)
#family
all$family <- all$parch + all$sibsp + 1
#boat
all$boat[is.na(all$boat)] <- "0"
all$boat[all$boat != "0"] <- "1"
all$boat <- all$boat %>% as.factor()
#body
all$body[is.na(all$body)] <- "0"
all$body[all$body != "0"] <- "1"
all$body <- all$body %>% as.factor()
#embark
all$embarked[is.na(all$embarked)] <- "X"
all$embarked <- all$embarked %>% as.factor()
#children
all$age[all$age <= 14] <- 1
all$age[all$age != 1] <- 0
all$age[is.na(all$age)] <- 0
all$age <- all$age %>% as.factor()
clean_test <- all[is.na(all$survived),]
clean_train <- all[!is.na(all$survived),]
#SVM
set.seed(1001)
titanic_svm <- train(survived~ pclass + sex + family + body + boat, data = clean_train, method='svmRadial', preProcess= c('center', 'scale'), trControl=trainControl(method="cv", number = 5))
library(caret)
set.seed(1001)
titanic_svm <- train(survived~ pclass + sex + family + body + boat, data = clean_train, method='svmRadial', preProcess= c('center', 'scale'), trControl=trainControl(method="cv", number = 5))
set.seed(1001)
titanic_svm <- train(survived~ pclass + sex + family + body + boat, data = clean_train, method='svmRadial', preProcess= c('center', 'scale'), trControl=trainControl(method="cv", number = 5))
titanic_svm
setwd("E:/GitHub/NTU_code/week_8/task_8")
train <- read.csv("titanicTrain.csv")
train <- train[c(1:1000),]
train <- read.csv("titanicTrain.csv")
train <- train[c(1:1000),]
# Train data 上面的NA
str(train)
sapply(train, function(x) {sum(is.na(x))})
# 篩選登船與沒有登船存活率
boat <- train[train$boat!='',] %>% as.factor()
notboat <- titanic[titanic$boat=='',]
boat <- summary(as.factor(boat$survived))
notboat <- summary(as.factor(notboat$survived))
names(boat) <- c("No","Yes")
boat %>% barplot
# embarked
C <- titanic[titanic$embarked=="C",]
# embarked
C <- train[train$embarked=="C",]
# embarked
embark <- cbind(train$survived,train$embarked)
View(embark)
train$embarked
# embarked
train$embarked <- train$embarked %>% as.factor
# embarked
train$embarked <- train$embarked %>% as.factor
summary(train$embarked)
train$embarked[train$survived==0]
summary(train$embarked[train$survived==0])
summary(train$embarked[train$survived==1])
embark <- cbind(summary(train$embarked[train$survived==0]),summary(train$embarked[train$survived==1]))
embark
embark[c(1:3)]
embark[-1,]
embark <- embark[-1,] %>% t
embark
rownames(embark) <- c("0","1")
barplot(embark,col=c("gray","black"),main="embarked variable",beside=TRUE,ylab="counts")
legend("topright", inset=.02,title="Survive",
c("0","1"), fill=c("gray","black"), horiz=TRUE, cex=0.8)
parch_sib <- titanic$parch + titanic$sibsp
titanic <- cbind(titanic,parch_sib)
ps0 <- titanic$parch_sib[titanic$survived==0] %>% as.factor %>% summary
ps1 <- titanic$parch_sib[titanic$survived==1] %>% as.factor %>% summary %>% c(.,0)
parch_sib <- train$parch + reain$sibsp
parch_sib <- train$parch + train$sibsp
family <- train$parch + train$sibsp
train <- cbind(train,family)
ps0 <- train$family[train$survived==0] %>% as.factor %>% summary
ps0 <- train$family[train$survived==0] %>% as.factor %>% summary
ps1 <- train$family[train$survived==1] %>% as.factor %>% summary %>% c(.,0)
ps <- rbind(ps0,ps1)
family <- rbind(ps0,ps1)
barplot(family,col=c("gray","black"),main="parch+sibsp variable",beside=TRUE,ylab="counts",xlab="parch+sibsp 數量")
family
train <- read.csv("titanicTrain.csv")
train <- train[c(1:1000),]
## embarked ##
train$embarked <- train$embarked %>% as.factor
summary(train$embarked[train$survived==0])
summary(train$embarked[train$survived==1])
embark <- cbind(summary(train$embarked[train$survived==0]),summary(train$embarked[train$survived==1]))
embark <- embark[-1,] %>% t
rownames(embark) <- c("0","1")
barplot(embark,col=c("gray","black"),main="embarked variable",beside=TRUE,ylab="counts")
legend("topright", inset=.02,title="Survive",
c("0","1"), fill=c("gray","black"), horiz=TRUE, cex=0.8)
family <- train$parch + train$sibsp + 1
train <- cbind(train,family)
ps0 <- train$family[train$survived==0] %>% as.factor %>% summary
ps1 <- train$family[train$survived==1] %>% as.factor %>% summary %>% c(.,0)
family <- rbind(ps0,ps1)
rm(ps0)
rm(ps1)
barplot(family,col=c("gray","black"),main="parch+sibsp variable",beside=TRUE,ylab="counts",xlab="parch+sibsp 數量")
legend("topright", inset=.02,title="Survive",
c("0","1"), fill=c("gray","black"), horiz=TRUE, cex=0.8)
barplot(family,col=c("gray","black"),main="family",beside=TRUE,ylab="counts",xlab="parch+sibsp 數量")
barplot(family,col=c("gray","black"),main="family",beside=TRUE,ylab="counts",xlab="Number of people")
legend("topright", inset=.02,title="Survive",
c("0","1"), fill=c("gray","black"), horiz=TRUE, cex=0.8)
setwd("E:/GitHub/NTU-CSX-DataScience--Group5/Project_3")
